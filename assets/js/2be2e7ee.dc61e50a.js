"use strict";(self.webpackChunkobsrvr_docs=self.webpackChunkobsrvr_docs||[]).push([[4440],{175:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"flow/processors/contract-events","title":"Contract Events","description":"The Contract Events processor captures and processes events emitted by Soroban smart contracts, enabling real-time monitoring and analytics for decentralized applications.","source":"@site/docs/flow/processors/contract-events.md","sourceDirName":"flow/processors","slug":"/flow/processors/contract-events","permalink":"/docs/flow/processors/contract-events","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Contract Events"},"sidebar":"docs","previous":{"title":"Payments with Memo","permalink":"/docs/flow/processors/payments-with-memo"},"next":{"title":"Consumers Overview","permalink":"/docs/flow/consumers/"}}');var i=t(4848),r=t(8453);const o={sidebar_position:5,title:"Contract Events"},c="Contract Events Processor",a={},l=[{value:"Overview",id:"overview",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Parameters",id:"parameters",level:3},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"With Contract Filtering",id:"with-contract-filtering",level:3},{value:"Output Format",id:"output-format",level:2},{value:"Event Structure",id:"event-structure",level:2},{value:"Topics",id:"topics",level:3},{value:"Data",id:"data",level:3},{value:"Common Event Patterns",id:"common-event-patterns",level:2},{value:"Token Transfer Event",id:"token-transfer-event",level:3},{value:"Liquidity Pool Event",id:"liquidity-pool-event",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Contract Filtering",id:"1-use-contract-filtering",level:3},{value:"2. Design Meaningful Events",id:"2-design-meaningful-events",level:3},{value:"3. Handle Event Versions",id:"3-handle-event-versions",level:3},{value:"Integration Examples",id:"integration-examples",level:2},{value:"DeFi Analytics Dashboard",id:"defi-analytics-dashboard",level:3},{value:"Real-time Notifications",id:"real-time-notifications",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Related Processors",id:"related-processors",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"contract-events-processor",children:"Contract Events Processor"})}),"\n",(0,i.jsx)(n.p,{children:"The Contract Events processor captures and processes events emitted by Soroban smart contracts, enabling real-time monitoring and analytics for decentralized applications."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Soroban smart contracts can emit events during execution, providing a powerful way to track contract activity, state changes, and important occurrences. This processor captures all contract events from the network and delivers them in a structured format."}),"\n",(0,i.jsx)(n.p,{children:"Note: To filter events from specific contracts, combine this processor with the Contract Filter processor."}),"\n",(0,i.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DeFi Protocol Monitoring"}),": Track swaps, liquidity changes, and liquidations"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"NFT Marketplaces"}),": Monitor mints, transfers, and sales"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gaming dApps"}),": Capture game events and player actions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Governance Systems"}),": Track proposals, votes, and executions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Oracle Networks"}),": Monitor price updates and data submissions"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.p,{children:"The Contract Events processor requires no configuration parameters - it captures all contract events from the network. To filter specific contracts, combine it with the Contract Filter processor."}),"\n",(0,i.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "type": "contract_event"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"with-contract-filtering",children:"With Contract Filtering"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "type": "contract_filter",\n    "config": {\n      "contract_ids": [\n        "CCXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",\n        "CCYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"\n      ]\n    }\n  },\n  {\n    "type": "contract_event"\n  }\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"output-format",children:"Output Format"}),"\n",(0,i.jsx)(n.p,{children:"The processor outputs structured event data:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "ledger": 12345678,\n  "ledger_closed_at": "2024-01-15T10:30:00Z",\n  "contract_id": "CCXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",\n  "id": "0000012345678-0000000001",\n  "type": "contract",\n  "transaction_hash": "abc123def456...",\n  "in_successful_contract_call": true,\n  "topics": [\n    {\n      "type": "symbol",\n      "value": "transfer"\n    },\n    {\n      "type": "address",\n      "value": "GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"\n    }\n  ],\n  "data": {\n    "type": "map",\n    "value": {\n      "from": {\n        "type": "address",\n        "value": "GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"\n      },\n      "to": {\n        "type": "address",\n        "value": "GYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY"\n      },\n      "amount": {\n        "type": "i128",\n        "value": "1000000"\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"event-structure",children:"Event Structure"}),"\n",(0,i.jsx)(n.h3,{id:"topics",children:"Topics"}),"\n",(0,i.jsx)(n.p,{children:"Topics are indexed values that can be efficiently queried:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"First topic typically identifies the event type"}),"\n",(0,i.jsx)(n.li,{children:"Additional topics contain key event parameters"}),"\n",(0,i.jsx)(n.li,{children:"Limited to 4 topics per event"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"data",children:"Data"}),"\n",(0,i.jsx)(n.p,{children:"The event data payload containing detailed information:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Can be any Soroban data type (map, vec, address, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Not indexed but contains complete event details"}),"\n",(0,i.jsx)(n.li,{children:"Size limited by transaction constraints"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-event-patterns",children:"Common Event Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"token-transfer-event",children:"Token Transfer Event"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "topics": [\n    {"type": "symbol", "value": "transfer"},\n    {"type": "address", "value": "GFROM..."},\n    {"type": "address", "value": "GTO..."}\n  ],\n  "data": {\n    "type": "i128",\n    "value": "1000000"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"liquidity-pool-event",children:"Liquidity Pool Event"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "topics": [\n    {"type": "symbol", "value": "swap"},\n    {"type": "address", "value": "GUSER..."}\n  ],\n  "data": {\n    "type": "map",\n    "value": {\n      "amount_in": {"type": "i128", "value": "1000"},\n      "amount_out": {"type": "i128", "value": "950"},\n      "token_in": {"type": "address", "value": "CCTOKEN1..."},\n      "token_out": {"type": "address", "value": "CCTOKEN2..."}\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"1-use-contract-filtering",children:"1. Use Contract Filtering"}),"\n",(0,i.jsx)(n.p,{children:"Always combine with Contract Filter when monitoring specific contracts to reduce data volume:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "type": "contract_filter",\n    "config": {\n      "contract_ids": ["CCYOUR_CONTRACT_ID..."]\n    }\n  },\n  {\n    "type": "contract_event"\n  }\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-design-meaningful-events",children:"2. Design Meaningful Events"}),"\n",(0,i.jsx)(n.p,{children:"When building contracts, design events with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clear, descriptive topic values"}),"\n",(0,i.jsx)(n.li,{children:"Consistent event schemas"}),"\n",(0,i.jsx)(n.li,{children:"Minimal but complete data"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"3-handle-event-versions",children:"3. Handle Event Versions"}),"\n",(0,i.jsx)(n.p,{children:"Plan for event schema evolution:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Include version indicators in events"}),"\n",(0,i.jsx)(n.li,{children:"Maintain backward compatibility"}),"\n",(0,i.jsx)(n.li,{children:"Document event changes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,i.jsx)(n.h3,{id:"defi-analytics-dashboard",children:"DeFi Analytics Dashboard"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "processors": [\n    {\n      "type": "contract_filter",\n      "config": {\n        "contract_ids": ["CC_DEX_CONTRACT_ID..."]\n      }\n    },\n    {\n      "type": "contract_event"\n    }\n  ],\n  "consumer": {\n    "type": "postgres",\n    "config": {\n      "connection_string": "postgresql://...",\n      "table_name": "dex_events"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"real-time-notifications",children:"Real-time Notifications"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "processors": [\n    {\n      "type": "contract_event"\n    }\n  ],\n  "consumer": {\n    "type": "webhook",\n    "config": {\n      "url": "https://api.example.com/contract-events",\n      "batch_size": 1\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Network-wide Monitoring"}),": Processing all contract events can be resource-intensive"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Filtering"}),": Always use Contract Filter for specific contract monitoring"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Batch Processing"}),": Configure appropriate batch sizes in consumers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Event Volume"}),": Some contracts emit many events per transaction"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"No events captured:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Verify the contract actually emits events"}),"\n",(0,i.jsx)(n.li,{children:"Check if events are in successful contract calls"}),"\n",(0,i.jsx)(n.li,{children:"Ensure correct network (mainnet/testnet) selection"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Too many events:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add Contract Filter processor"}),"\n",(0,i.jsx)(n.li,{children:"Process events in your consumer application"}),"\n",(0,i.jsx)(n.li,{children:"Consider event topic filtering in post-processing"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"related-processors",children:"Related Processors"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Contract Filter - Filter events by contract ID"}),"\n",(0,i.jsx)(n.li,{children:"Contract Invocation - Track contract function calls"}),"\n",(0,i.jsx)(n.li,{children:"Contract Data - Monitor contract storage changes"}),"\n",(0,i.jsx)(n.li,{children:"Extracted Contract Invocation - Extract structured business data"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(6540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);